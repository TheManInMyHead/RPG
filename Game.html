<!DOCTYPE html>
<html>
	<head>
		<title>RPG</title>
		<!--One tile ~= 2 em -->
		<!--Bottom of this background: 708 px-->
		<!--Top of this background: 76 px-->
		<!--Left of this background: 600 px-->
		<!--Right of this background: 1304 px-->
		<!--Total size of this image: 541x541 (?) px-->
		<style>
			#head {
				border: solid;
				border-width: 2px;
				text-align: center;
			}
			div {
				background-color: black;
				z-index: 0;
				position: absolute;
				left: 50%;
				margin-left: -352px;
				width: 704px;
				height: 704px;
			}
			#background {
				z-index: 1;
				position: absolute;
				left: 50%;
				margin-left: -352px;
				width: 44em;
				height: 44em;
			}
			#foreground {
				z-index: 3;
				position: absolute;
				left: 50%;	 
				margin-left: -352px;
				width: 44em;
				height: 44em;
			}
			.entity {
				z-index: 2;
				position: absolute;
			}
			#player {
			//	top: 6.6em;
				top: 48.65em;
				left: 22.65em;
				width: 2em;
				height: 2em;
			}
		</style>
		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
		<script type="text/javascript" src="pxem.jQuery.js"></script>
<!--	-->	<script type="text/javascript">
			$(document).ready(function() {
				$(document).keyup(function(key) {
					var distanceLeftPx = parseInt($('#player').css('left').substr(0, $("#player").css("left").length - 2)); 
					var distanceLeft = parseInt($(distanceLeftPx).toEm().substr(0, $(distanceLeftPx).toEm().length - 2));
					var distanceTopPx = parseInt($('#player').css('top').substr(0, $("#player").css("top").length - 2));
					var distanceTop = parseInt($(distanceTopPx).toEm().substr(0, $(distanceTopPx).toEm().length - 2));
//					alert(distanceLeftPx + "\n" + distanceLeft);
//					alert(distanceTopPx + "\n" + distanceTop);
					switch(parseInt(key.which,10)) {
						case 37:
						case 65:
							if (distanceLeft > 22.65) {
//								alert(distanceLeftPx + "\n" + distanceLeft);
								$('#player').animate({left: "-=2em"}, 'fast');
							}
						break;
						case 39:
						case 68:
							if (distanceLeft < 63.5625) {
//								alert(distanceLeftPx + "\n" + distanceLeft);
								$('#player').animate({left: "+=2em"}, 'fast');
							}
						break;
						case 38:
						case 87:
							if (distanceTop > 6.6) {
								$('#player').animate({top: "-=2em"}, 'fast');
							}
						break;
						case 40:
						case 83:
							if (distanceTop < 47.65) {
								$('#player').animate({top: "+=2em"}, 'fast');
							}
						break;
					}
				});
			});
		</script> <!-- -->
		<script type="text/javascript" src="mapFuncs.js"></script>
<!--			$(document).ready(function() {
				var loadMap = function(background, foreground, playerX, playerY) {
					document.getElementById("background").src = background;
					document.getElementById("foreground").src = foreground;
					var playerFinalX = (playerX * 32) + 608;
					var playerFinalY = (playerY * 32) + 108;
					document.getElementById("player").css('top', playerFinalX);
				}
			}); -->
		</script>
	</head>
	<body>
		<h2 id="head">RPG</h2>
		<p style="text-align:center">Use the arrow keys (or ASDW) to move.</p>
		<div></div>
		<img id="background" src="Resources/1.png">
		<img id="foreground" src="Resources/1Fore.png">
		<img id="player" class="entity" src="Resources/Player.png">
	</body>
</html>
